---
layout: post
title: test
date: 2025-02-04 13:51:00 +0900
category: bootcamp-til
---

<div style="width: 100%; overflow: hidden;">
  <iframe id="myIframe" src="/web/album/index.html" width="100%" style="border:none; overflow-x: scroll;"></iframe>
</div>

<script>
  function resizeIframe() {
    var iframe = document.getElementById("myIframe");
    var contentBody = iframe.contentWindow.document.body;

    if (iframe && contentBody) {
      // 콘텐츠 높이에 맞게 iframe의 높이 자동 설정
      iframe.style.height = contentBody.scrollHeight + "px";
    }
  }

  // iframe 로드 후 높이 자동 조정
  document.getElementById("myIframe").onload = function() {
    setTimeout(resizeIframe, 100); // 로딩 후 조금 기다려 높이 조정
  };

  // 창 크기 변화 시에도 높이 재조정
  window.addEventListener("resize", resizeIframe);

  // MutationObserver를 사용하여 iframe 내부 내용이 변경될 때마다 높이를 업데이트
  var iframe = document.getElementById("myIframe");
  var observer = new MutationObserver(resizeIframe);

  // `iframe` 내부 문서의 body에 변화를 감지
  iframe.onload = function() {
    var iframeDocument = iframe.contentWindow.document;
    observer.observe(iframeDocument.body, {
      childList: true,        // 자식 요소의 변화 감지
      subtree: true,          // 자식 요소가 깊숙이 변화하는 것도 감지
      characterData: true,    // 텍스트 변경도 감지
    });
  };
</script>
