---
layout: post
title: "[TIL] 2025-03-06 / ê³„ì‚°ê¸° Lv-2.3"
date: 2025-03-06 20:20:00 +0900
categories: 
  - til
  - main-camp
---

* toc
{:toc}

## ğŸ“– Today I Learned
### ê³„ì‚°ê¸° Lv-2.3

<!-- <h4> ğŸ“ƒ </h4> -->

---

#### - App(main) ì½”ë“œ

```java
import java.util.Scanner;

public class App {
    public static void main(String[] args) {

        Scanner scanner = new Scanner(System.in);
        Calculator calculator = new Calculator();

        System.out.println();
        System.out.println("ê³„ì‚°ê¸°ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤");

        while (true) {
            System.out.println();
            System.out.println("-------------(exit ì…ë ¥ ì‹œ ì¢…ë£Œ)---------------");

            // ìœ íš¨í•œ ìˆ˜ì‹ ì…ë ¥ ë°›ê¸°
            String expression = calculator.getValidExpression();
            // ì…ë ¥ë°›ì€ ìˆ˜ì‹ì„ í‰ê°€í•˜ì—¬ ê²°ê³¼ ê³„ì‚°
            int result = calculator.evaluateExpression(expression);
            // ê³„ì‚°ëœ ê²°ê³¼ë¥¼ ì €ì¥
            calculator.setResults(result);
            // ê³„ì‚°ëœ ê²°ê³¼ì™€ ì…ë ¥ëœ ìˆ˜ì‹ ì¶œë ¥
            calculator.printResults(result, expression);
        }
    }
}
```

#### - Calculator í´ë˜ìŠ¤ ìƒì„±ì

```java
import java.util.*;

public class Calculator {
    private final Scanner scanner;
    private final Queue<Integer>  results;

    public Calculator() {
        this.scanner = new Scanner(System.in);
        this.results = new LinkedList<>();
    }
}
```

#### - Caculator í´ë˜ìŠ¤ / ê³„ì‚° ê²°ê³¼ ì €ì¥ ë©”ì„œë“œ

```java
public void setResults(int result) {
        results.offer(result);
    }
```

#### - Caculator í´ë˜ìŠ¤ / ê³„ì‚° ê²°ê³¼ ì œê±° ë©”ì„œë“œ

```java
public void removeResult() {
        if (!results.isEmpty()) {
            results.poll();
        } else {
            System.out.println("ì €ì¥ëœ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.");
        }
    }
```

#### - Caculator í´ë˜ìŠ¤ / ê³„ì‚° ê²°ê³¼ ë°˜í™˜ ë©”ì„œë“œ

```java
public Queue<Integer> getResults() {
        return results;
    }
```

#### - Caculator í´ë˜ìŠ¤ / ìœ íš¨í•œ ìˆ˜ì‹ì„ ì…ë ¥ë°›ëŠ” ë©”ì„œë“œ

```java
public String getValidExpression() {
        while (true) {

            System.out.print("ê³„ì‚°ì‹ì„ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: 5-2*3) : ");
            // ê³µë°± ì œê±°
            String expression = scanner.nextLine().replace("\s", "");

            // exit ì…ë ¥ì‹œ ê³„ì‚°ê¸° ì¢…ë£Œ
            if (scanner.hasNext("exit")) {
                System.out.println();
                System.out.println("ê³„ì‚°ê¸°ë¥¼ ì¢…ë£Œí•©ë‹ˆë‹¤.");
                scanner.close();
                System.exit(0);
            }

            // ì…ë ¥ëœ ìˆ˜ì‹ì´ ìˆ«ìì™€ ì‚¬ì¹™ì—°ì‚°ë§Œ í¬í•¨í•˜ëŠ”ì§€ í™•ì¸
            if (expression.matches("[0-9+\\-*/]+")) {
                return expression;
            } else {
                System.out.println();
                System.out.println("ì˜ëª»ëœ ì…ë ¥ì…ë‹ˆë‹¤. ìˆ«ìì™€ ì‚¬ì¹™ì—°ì‚° ê¸°í˜¸(+,-,*,/)ë§Œ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            }
        }
    }
```

#### - Caculator í´ë˜ìŠ¤ / ì¤‘ìœ„ í‘œê¸°ë²• -> í›„ìœ„ í‘œê¸°ë²•ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ë©”ì„œë“œ

```java
private List<String> convertToPostfix(String expression) {
        List<String> output = new ArrayList<>();
        Stack<Character> operators = new Stack<>();
        // ì—°ì‚°ì ìš°ì„ ìˆœìœ„ë¥¼ ë§µì— ì €ì¥
        Map<Character, Integer> precedence = Map.of('+', 1, '-', 1, '*', 2, '/', 2);

        StringBuilder numberBuffer = new StringBuilder();
        for (char ch : expression.toCharArray()) {
            if (Character.isDigit(ch)) {
                // ìˆ«ìë¥¼ ë²„í¼ì— ì¶”ê°€
                numberBuffer.append(ch);
            } else {
                if (numberBuffer.length() > 0) {
                    // ë²„í¼ì— ìˆëŠ” ìˆ«ìë¥¼ ì¶œë ¥ ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€
                    output.add(numberBuffer.toString());
                    // ë²„í¼ ì´ˆê¸°í™”
                    numberBuffer.setLength(0);
                }
                // ì—°ì‚°ìì™€ ìš°ì„ ìˆœìœ„ê°€ ë” ë‚®ì€ ì—°ì‚°ìë“¤ì„ ì¶œë ¥ ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€
                while (!operators.isEmpty() && precedence.get(operators.peek()) >= precedence.get(ch)) {
                    output.add(String.valueOf(operators.pop()));
                }
                // ì—°ì‚°ìë¥¼ ìŠ¤íƒì— ì¶”ê°€
                operators.push(ch);
            }
        }
        // ë‚¨ì•„ ìˆëŠ” ìˆ«ì ë²„í¼ë¥¼ ì¶œë ¥ ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€
        if (numberBuffer.length() > 0) {
            output.add(numberBuffer.toString());
        }
        // ë‚¨ì•„ ì´ì“´ ì—°ì‚°ìë¥¼ ì¶œë ¤ ã„±ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€
        while (!operators.isEmpty()) {
            output.add(String.valueOf(operators.pop()));
        }
        return output;
    }
```

#### - Caculator í´ë˜ìŠ¤ / í›„ìœ„ í‘œê¸°ë²•ìœ¼ë¡œ ë³€í™˜ëœ ë°ì´í„°ë¥¼ ê³„ì‚°í•˜ëŠ” ë©”ì„œë“œ

```java
private int calculatePostfix(List<String> postfix) {
        Stack<Integer> stack = new Stack<>();
        for (String token : postfix) {
            // ìˆ«ìë©´ ìŠ¤íƒì— ë„£ì–´ì¤Œ
            if (token.matches("\\d+")) {
                stack.push(Integer.parseInt(token));
            } else { // ì—°ì‚°ìê°€ ë‚˜ì˜¤ë©´ ìŠ¤íƒì—ì„œ ë‘ê°œì˜ ìˆ«ìë¥¼ ë„£ì–´ ì—°ì‚° ìˆ˜í–‰(stackì€ LIFO ì„ ì… í›„ì¶œ)
                int b = stack.pop();
                int a = stack.pop();
                switch (token.charAt(0)) {
                    case '+' -> stack.push(a + b);
                    case '-' -> stack.push(a - b);
                    case '*' -> stack.push(a * b);
                    case '/' -> {
                        if (b == 0) { // 0ìœ¼ë¡œ ë‚˜ëˆŒ ë•Œ ì˜ˆì™¸ì²˜ë¦¬
                            throw new ArithmeticException("0ìœ¼ë¡œ ë‚˜ëˆŒ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                        }
                        stack.push(a / b);
                    }
                }
            }
        }
        // ìµœì¢… ê²°ê³¼ë¥¼ ë°˜í™˜
        return stack.pop();
    }
```

#### - Caculator í´ë˜ìŠ¤ / ì…ë ¥ ë°›ì€ ìˆ˜ì‹ì„ ê³„ì‚°í•˜ëŠ” ë©”ì„œë“œ

```java
public int evaluateExpression(String expression) {
        List<String> postfix = convertToPostfix(expression); // ì¤‘ìœ„ í‘œê¸°ë¥¼ í›„ìœ„ í‘œê¸°ë²•ìœ¼ë¡œ ë³€í™˜
        return calculatePostfix(postfix); // í›„ìœ„ í‘œê¸°ë²•ì„ ê³„ì‚°
    }
```

#### - Caculator í´ë˜ìŠ¤ / ê³„ì‚° ê²°ê³¼ ì¶œë ¥ ë° ì €ì¥ëœ ê³„ì‚° ê²°ê³¼ ì¶œë ¥ ë©”ì„œë“œ

```java
public void printResults(int result, String expression) {
        System.out.println();
        System.out.println("----------------------------------------");
        // ì €ì¥ëœ ê³„ì‚° ê²°ê³¼ ì¶œë ¥
        System.out.print("ì €ì¥ëœ ê³„ì‚° ê²°ê³¼ : ");
        for (int i : getResults()) {
            System.out.print(i + " ");
        }
        // ê³„ì‚°ëœ ìˆ˜ì‹ê³¼ ê²°ê³¼ ì¶œë ¥
        System.out.println();
        System.out.println("ê²°ê³¼ : " + expression + " = " + result);
        System.out.println();

        System.out.println("------------(del ì…ë ¥ ì‹œ ì‚­ì œ)------------");
        System.out.print("ì €ì¥ëœ ê²°ê³¼ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? : ");
        // del ì…ë ¥ì‹œ ê²°ê³¼ ì‚­ì œ
        if (scanner.hasNext("del")) {

            System.out.println();
            removeResult();

            System.out.print("ì €ì¥ëœ ê³„ì‚° ê²°ê³¼ : ");
            for (int i : getResults()) {
                System.out.print(i + " ");
            }
        }
        scanner.nextLine();
    }
```

---

<h2> ğŸ’¬ </h2>

<h4> ì›ë˜ Lv 3ì¸ Enum, ì œë„¤ë¦­ ë“±ì„ ì‚¬ìš©í•˜ëŠ” ë„ì „ ë©”ì„œë“œ ê¹Œì§€ í•´ë³´ë ¤ê³  í–ˆì§€ë§Œ <br>
ë‘ ìˆ˜ì˜ ê³„ì‚°ì´ ì•„ë‹Œ ë‚´ê°€ ì›í•˜ëŠ” ê³„ì‚°ì‹ì„ ì…ë ¥ ë°›ì•„ ê³„ì‚°í•˜ëŠ” ê±¸ ë§Œë“ ë‹¤ê³  ëª»í•´ë²„ë ¸ë‹¤.. <br>
ë‹¤ìŒ ê³¼ì œë¶€í„´ ì‹œê°„ ë¶„ë°°ë¥¼ ì˜ í•´ì•¼ê² ë‹¤.. </h4>
