---
layout: post
title: "[TIL] 2025-04-24 / JPA 상속관계 매핑 전략"
date: 2025-04-24 20:10:00 +0900
categories: 
  - til
  - main-camp
---

* toc
{:toc}

## 📖 Today I Learned
### JPA 상속관계 매핑 전략

<!-- <h4> 📃 </h4> -->

---

#### - JPA 상속관계 매핑 전략
- 객체지향 설계의 장점을 관계형 데이터베이스와 잘 매핑하기 위함
- 자바에서의 상속은 자연스러운 개념이지만 RDB는 상속 개념이 없기 때무에 이를 잘 매핑해주기 위한 전략이 필요

#### - 사용이유
1. 객체지향적인 설계를 RDB에 반영하기 위해
   - 객체는 상속을 사용해 설계했는데, DB 테이블은 이를 어떻게 표현할지 고민해야 함 -> JPA의 전략으로 해결
2. 코드의 재사용성과 유지보수성 향상
   - 공통 필드를 부모 클래스에 정의하고 자식 클래스는 특화된 필드만 가지게 함으로써 중복을 줄이고 유지보수를 편하게 가능
3. 다양한 매핑 전략 선택 가능
   - 단일 테이블 전략 (`@Inheritance(strategy = InheritanceType.SINGLE_TABLE)`)
     - 모든 클래스를 하나의 테이블에 저장
     - 장점 : 조회 성능 좋음, 조인 필요 없음
     - 단점 : 불필요한 컬럼이 많아짐
   - 조인 전략 (`@Inheritance(strategy = InheritanceType.JOINED)`)
     - 부모와 자식 각각 테이블 분리 + 조인
     - 장점 : 정규화, 깔끔한 구조
     - 단점 : 조인 비용
   - 구현 클래스마다 테이블 전략 (`@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)`)
     - 자식 클래스마다 테이블을 따로 생성
     - 장점 : 독립적인 테이블 구조
     - 단점 : 다형성 조회 시 Union 필요 -> 성능 저하
4. 다형성 쿼리 가능
   - `em.createQuery("SELECT i FROM Item i")` → 모든 자식 클래스 포함된 결과 조회 가능
   - 상속 관계가 DB에도 잘 반영되어 있어야 다형성 쿼리 가능


<!-- --- -->

<!-- <h2> 💬 </h2> -->

<!-- <h4>  </h4> -->
