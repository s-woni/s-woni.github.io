---
layout: post
title: "[TIL] 2025-06-23 / ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ë€?"
date: 2025-06-23 20:00:00 +0900
categories:
  - til
  - main-camp
---

* toc
{:toc}

## ğŸ“– Today I Learned
### ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ë€?

---

#### - **ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ë€?**
- ìŠ¤í”„ë§ ê¸°ë°˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì¸ì¦(Authentication)Â·ì¸ê°€(Authorization)Â·ë³´í˜¸(Security) ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” í”„ë ˆì„ì›Œí¬
- HTTP ìš”ì²­Â·ì‘ë‹µ ê³¼ì •ì—ì„œ ì¼ê´€ëœ ë³´ì•ˆ ì •ì±… ì ìš© ê°€ëŠ¥
- ì„ ì–¸ì  ì„¤ì •ê³¼ í”„ë¡œê·¸ë˜ë° ë°©ì‹ ëª¨ë‘ ì§€ì›

#### - **ì£¼ìš” êµ¬ì„± ìš”ì†Œ**
- Security Filter Chain: HTTP ìš”ì²­ë³„ ì¼ë ¨ì˜ ë³´ì•ˆ í•„í„° ì²´ì¸ìœ¼ë¡œ ì¸ì¦Â·ì¸ê°€ íë¦„ ì œì–´
- AuthenticationManager: ì¸ì¦ ì²˜ë¦¬ì˜ ì¤‘ì•™ í—ˆë¸Œ ì—­í• 
- UserDetailsService: ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ ì¸í„°í˜ì´ìŠ¤
- PasswordEncoder: ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™”Â·ê²€ì¦ êµ¬í˜„ì²´
- GrantedAuthority: ê¶Œí•œ(Roles/Authorities) í‘œí˜„ì²´

#### - **ë³´ì•ˆ ì„¤ì • ë°©ì‹**
- WebSecurityConfigurerAdapter ìƒì† (ê¸°ì¡´ ë°©ì‹)

```java
@EnableWebSecurity
public class SecurityConfig extends WebSecurityConfigurerAdapter {
    @Override
    protected void configure(HttpSecurity http) throws Exception {
        http
          .authorizeRequests()
            .antMatchers("/admin/**").hasRole("ADMIN")
            .antMatchers("/user/**").authenticated()
            .anyRequest().permitAll()
          .and()
          .formLogin()
          .and()
          .csrf().disable();
    }
}
```

- SecurityFilterChain ë¹ˆ ë“±ë¡ (ì¶”ì²œ ë°©ì‹)

```java
@Configuration
@EnableWebSecurity
public class SecurityConfig {
    @Bean
    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {
        http
          .authorizeHttpRequests(auth -> auth
             .mvcMatchers("/admin/**").hasRole("ADMIN")
             .anyRequest().permitAll()
          )
          .formLogin(withDefaults())
          .csrf().disable();
        return http.build();
    }
}
```

#### - **ì¸ì¦(Authentication) ê³¼ì •**
1. ë¡œê·¸ì¸ ìš”ì²­ â†’ UsernamePasswordAuthenticationFilterê°€ ìê²© ì¦ëª… í† í° ìƒì„±
2. AuthenticationManagerê°€ êµ¬í˜„ì²´(UserDetailsService) í†µí•´ ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ ë° ë¹„ë°€ë²ˆí˜¸ ê²€ì¦
3. ì¸ì¦ ì„±ê³µ ì‹œ SecurityContextHolderì— Authentication ì €ì¥

#### - **ì¸ê°€(Authorization) ê³¼ì •**
- URL íŒ¨í„´ ê¸°ë°˜ ì ‘ê·¼ ì œì–´
- `@Secured`, `@RolesAllowed`, `@PreAuthorize` ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ ë©”ì„œë“œ ë‹¨ìœ„ ê¶Œí•œ ê²€ì‚¬

#### - **JWT í† í° ê¸°ë°˜ ì¸ì¦**
- OncePerRequestFilter í™•ì¥í•´ JWT íŒŒì‹±Â·ê²€ì¦ í•„í„° êµ¬í˜„
- ë¬´ìƒíƒœ(stateless) ì¸ì¦ìœ¼ë¡œ í™•ì¥ì„± í™•ë³´

#### - **ì¶”ê°€ ì¶”ì²œ ê¸°ëŠ¥**
- CSRF ë³´í˜¸: ê¸°ë³¸ í™œì„±í™”, API ì„œë²„ì—ì„  `csrf().disable()` ê³ ë ¤
- CORS ì„¤ì •: `CorsConfigurationSource` ë¹ˆ ë“±ë¡
- Remember-Me, OAuth2 Client/Resource Server ì§€ì›
